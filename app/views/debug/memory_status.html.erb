<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
  <div class="bg-white shadow rounded-lg">
    <div class="px-4 py-5 sm:p-6">
      <h1 class="text-2xl font-bold text-gray-900 mb-6">Memory Debug Dashboard</h1>
      
      <!-- Memory Status -->
      <div class="mb-8">
        <h2 class="text-lg font-semibold text-gray-900 mb-4">Memory Status</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div class="bg-gray-50 p-4 rounded-lg">
            <p><strong>File Path:</strong> <%= @memory_status[:file_path] %></p>
            <p><strong>File Exists:</strong> <%= @memory_status[:file_exists] ? 'Yes' : 'No' %></p>
            <p><strong>File Size:</strong> <%= @memory_status[:file_size] %> bytes</p>
          </div>
          <div class="bg-gray-50 p-4 rounded-lg">
            <p><strong>Memory Count:</strong> <%= @memory_status[:memory_count] %></p>
            <p><strong>Categories:</strong> <%= @memory_status[:categories].join(', ') %></p>
          </div>
        </div>
      </div>

      <!-- Test Results (if available) -->
      <% if defined?(@test_results) %>
        <div class="mb-8">
          <h2 class="text-lg font-semibold text-gray-900 mb-4">Test Results</h2>
          <div class="space-y-2">
            <% @test_results.each do |result| %>
              <div class="flex items-center space-x-4 p-3 <%= result[:success] ? 'bg-green-50' : 'bg-red-50' %> rounded-lg">
                <div class="flex-1">
                  <p class="font-medium"><%= result[:memory][:content] %></p>
                  <p class="text-sm text-gray-600">
                    Category: <%= result[:memory][:category] %> | 
                    Importance: <%= result[:memory][:importance] %>
                  </p>
                </div>
                <div class="<%= result[:success] ? 'text-green-600' : 'text-red-600' %>">
                  <%= result[:success] ? '✓ Success' : '✗ Failed' %>
                </div>
              </div>
            <% end %>
          </div>
        </div>
      <% end %>

      <!-- Memory Statistics -->
      <div class="mb-8">
        <h2 class="text-lg font-semibold text-gray-900 mb-4">Memory Statistics</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <div class="bg-blue-50 p-4 rounded-lg text-center">
            <p class="text-2xl font-bold text-blue-600"><%= @stats[:total_memories] %></p>
            <p class="text-sm text-blue-800">Total Memories</p>
          </div>
          <div class="bg-green-50 p-4 rounded-lg text-center">
            <p class="text-2xl font-bold text-green-600"><%= @stats[:by_importance][:high] %></p>
            <p class="text-sm text-green-800">High Importance</p>
          </div>
          <div class="bg-yellow-50 p-4 rounded-lg text-center">
            <p class="text-2xl font-bold text-yellow-600"><%= @stats[:by_importance][:medium] %></p>
            <p class="text-sm text-yellow-800">Medium Importance</p>
          </div>
        </div>
      </div>

      <!-- Recent Memories -->
      <div class="mb-8">
        <h2 class="text-lg font-semibold text-gray-900 mb-4">Recent Memories</h2>
        <div class="space-y-2">
          <% @memories.each do |memory| %>
            <div class="bg-gray-50 p-3 rounded-lg">
              <p class="font-medium"><%= memory['content'] %></p>
              <p class="text-sm text-gray-600">
                Category: <%= memory['category'] %> | 
                Importance: <%= memory['importance'] %> | 
                Created: <%= Time.parse(memory['created_at']).strftime('%Y-%m-%d %H:%M') %>
              </p>
            </div>
          <% end %>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="flex space-x-4">
        <%= link_to "Test Memory Storage", debug_test_memory_storage_path, 
            class: "bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg" %>
        
        <%= link_to "View Memory Status", debug_memory_status_path, 
            class: "bg-gray-600 hover:bg-gray-700 text-white font-medium py-2 px-4 rounded-lg" %>
        
        <%= button_to "Clear All Memories", debug_clear_memories_path, 
            method: :delete, 
            class: "bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg",
            data: { confirm: "Are you sure? This will delete all memories for testing." } %>
      </div>
    </div>
  </div>
</div>
